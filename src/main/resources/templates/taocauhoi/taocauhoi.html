<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>Trang quản lý</title>
<!-- Tell the browser to be responsive to screen width -->
<meta
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
	name="viewport" />
<!-- Bootstrap 3.3.6 -->
<link rel="stylesheet"
	href="/Assets/admin2/bootstrap/css/bootstrap.min.css" />
<!-- Font Awesome -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css" />
<!-- Ionicons -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" />
<!-- Theme style -->
<link rel="stylesheet" href="/Assets/admin2/dist/css/AdminLTE.min.css" />
<!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
<link rel="stylesheet"
	href="/Assets/admin2/dist/css/skins/_all-skins.min.css" />
<!-- bootstrap wysihtml5 - text editor -->
<link rel="stylesheet"
	href="/Assets/admin2/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" />
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  
  <![endif]-->
<script src="/Assets/admin2/plugins/jQuery/jquery-2.2.3.min.js"></script>
<script src="/Assets/admin2/myproduct.js" type="text/javascript"></script>
 <link rel="stylesheet" href="/Assets/admin2/plugins/iCheck/all.css"/>
<link rel="stylesheet" type="text/css"
	href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" />
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/buttons/1.3.1/css/buttons.bootstrap.min.css" />
<link rel="stylesheet" href="/Assets/admin/alert/sweetalert.css" />
  <script th:src="@{/js/congviec/sweetalert.min.js}" type="text/javascript"></script>
<link rel="stylesheet" href="check/style.css"/>
<style type="text/css">
.custom {
	font-style: italic;
	font-size: 15px;
	color: #468847;
	background-color: #dff0d8;
	border: 1px solid #d6e9c6;
	border-radius: 8px;
}
</style>
<script type="text/javascript" src="/Assets/admin2/thanh.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		$('#myDatatable').tableSearch({
			searchText : '',
			searchPlaceHolder : 'Tìm kiếm...'
		});
	});
</script>
</head>
<body class="hold-transition skin-blue sidebar-mini">
	<div class="wrapper">


		<div th:replace="_header2::menu"></div>

		<!-- Left side column. contains the logo and sidebar -->
		<aside th:replace="_main-sidebar2::main_sidebar2">
			


		</aside>



		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->


			<!-- Main content -->
			<section class="content">

				<!-- Main row -->
				<div class="row">
					<div class="col-md-12">
						<div class="box">
							<div class="box-header with-border">
								<i class="fa fa-inbox"></i> Quản trị


								<div class="box-tools pull-right">
									<button type="button" class="btn btn-box-tool"
										data-widget="collapse" data-toggle="tooltip" title=""
										data-original-title="Collapse">
										<i class="fa fa-minus"></i>
									</button>
									<button type="button" class="btn btn-box-tool"
										data-widget="remove" data-toggle="tooltip" title=""
										data-original-title="Remove">
										<i class="fa fa-times"></i>
									</button>
								</div>
							</div>
							<div class="box-body" style="display: block;">
               
<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
              <form role="form">
     
       
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span></button>
            <h3 class="box-title">Chi tiết</h3>
          </div>
								<div id="container" class="col-md-12">

								</div>




  <div class="modal-footer">
            <button id="pop-close" type="submit" class="btn btn-primary" data-dismiss="modal">Đóng</button>
       
        </div>
   
    </form> 
    </div>
  </div>
        </div>

        <div class="box">
            <div class="box-header">
              <h3 class="box-title">Bản công việc được phân công</h3>

              <div class="box-tools">
                <div class="input-group input-group-sm" style="width: 150px;">
                  <input type="text" name="table_search" class="form-control pull-right" placeholder="Tìm..."/>

                  <div class="input-group-btn">
                    <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                  </div>
                </div>
              </div>
            </div>
        <div class="col-md-12" >
        
        
        
        <table class="table table-bordered">
    <thead>
        <tr>
            <th>Tên Môn học</th>
            <th>Thời gian được phân công </th>
            <th>Thời gian dự kiến hoàn thành </th>
             <th>Loại công việc </th>
             <th>Nội dung công việc </th>
             <th>Tạo câu hỏi </th>
        </tr>
    </thead>
    <tbody id="capnhatsoluong">
    <th:block  th:each="cv:${GV.congViecList}" >
     <tr>
            <td class="ajax_mamh" th:text="${cv.mamon}">1</td>
            <td th:text="${cv.tgbabtdau}">John</td>
            <td th:text="${cv.tgketthuc}">Carter</td>
             <td th:text="${cv.maloaicv.tenloaicv}">Carter</td>
             <td th:text="${cv.noidungcv}">Carter</td>
             <td>
             
             
             <th:block th:if="${cv.maloaicv.maloaicv}==2">
             
    
             
             <div style="margin: 0px;" class="panel panel-default">
												<div class="panel-heading">
													<div style="MARGIN-TOP: -10PX;" class="pull-right">
														 <a class="badge bg-red" disabled="disabled"  th:text="${#lists.size(cv.ctTaoCauHoiList)}" ></a> <a class="badge bg-blue collapsed" data-toggle="collapse" data-parent="#accordion" th:href="'#collapse'+${cv.macv}" aria-expanded="false"> <i class="fa fa-list-ol"></i>&nbsp;Chi tiết  
														</a>
													</div>
													<h4 class="panel-title" style="margin-right: 150px;">
														<span class="counter"></span> <span>   </span>
													</h4>
												</div>
												<div  class="panel-collapse  chuong1 collapse"  th:id="'collapse'+${cv.macv}" aria-expanded="false" style="height: 0px;     white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;">
													<div style="padding: 0;" class="panel-body">
														<!-- /dan-an -->
														<th:block th:each="ct: ${cv.ctTaoCauHoiList}">
														
														
														<div style="margin: 1px;" class="form-group">
																
																	<label class="text  text-danger"> 
																	&nbsp;
																	<span th:if="${ctStat.count}==1" th:text="${ct.chuongMuc.mamon.tenmon}"></span>
																	</label> 
															      <br  th:if="${ctStat.count}==1"  />
																	<label class="text  text-danger"> <span style="color: #58100f;"  th:text="${ct.chuongMuc.tieude}" ></span>
																	
																	</label> 
																	<br/>
																	<label class="text  text-danger"> <span style="color: red;" th:text=" 'Chỉ tiêu (' +${ct.sl} +')  '"></span>
																	<span th:class="'tram'+${ct.chuongMuc.machuong}">Đã có 0 </span>
																	<span  data-toggle="modal" data-target=".bs-example-modal-lg" th:attr="data-magv=${cv.magv.magv}" th:attrappend="data-mamh=${ct.chuongMuc.mamon.mamon}" th:attrprepend="data-machuong=${ct.chuongMuc.machuong}" class="badge bg-success themcauhoi">+</span>
																	</label> 
															
															</div>
														
														
														
														</th:block>
															
														
														<!-- ./dap-an -->


													</div>
												</div>
											</div>
             
             
                      
             
             </th:block>
             
             
             
             
             </td>
        </tr>
        
    </th:block>
       
        
    </tbody>
</table>
        
        
        </div>
            <!-- /.box-header -->
       <div class="col-md-12">
        <div class="form-group" >
       						<th:block th:unless="${#lists.isEmpty(GV.monHocList)}">

												<label for="chapter">Môn học </label>
												<select class="form-control" id="viewmonhoc">
													<th:block th:each="mh:${GV.monHocList}">
														<option th:attr="data-id=${mh.mamon}"  th:value="${mhStat.index}" th:text="${mh.tenmon}"></option>
													</th:block>
												</select>
											</th:block>
											</div>
       </div>
      <div id="loading" >
      
      </div>
      <div class="col-md-12" >
      <div class="form-group" >
        <h3> Danh sách công việc </h3> 
      </div>
        <div class="form-group" >
       
      </div>
      
      </div>
            <div class="box-footer" >
          
              <div class="col-sm-6">
                <button type="submit" class="btn btn-info pull-right" data-toggle="modal" data-target=".bs-example-modal-lg"><i class="fa fa-plus"></i>&nbsp;Thêm</button>
              </div>
              <div class="clearfix"></div>
              <p class="text-right">
                <button type="button" class="btn btn-default"><i class="fa fa-refresh"></i>&nbsp;Làm lại</button>
                <button type="button" class="btn btn-primary"><i class="fa fa-check-circle"></i>&nbsp;Nộp bài</button>
              </p>
            </div>
            <!-- /.box-body -->
          </div>


		<script type="text/javascript" th:inline="javascript">
										/*<![CDATA[*/
							
											 $("#capnhatsoluong .themcauhoi").each(function () {
												  var div = $(this) ;
												   var mamh  = parseInt($(this).attr("data-mamh")) ;
												   var machuong  = parseInt($(this).attr("data-machuong"));
												   var magv = parseInt($(this).attr("data-magv")) ;
												 $.ajax({
													 url : 'taocauhoi/diem-so-cau-lam-dc/'+mamh+'/'+machuong+'/'+magv,
													 type : 'GET' ,
													 success : function  ( response ) {
														 var temp = div.attr("data-machuong") ;
														 $(".tram"+temp).html('Đã có '+ response) ;
													 }
												 });
											 });
                                        /* Act on the event */
                                     $(".themcauhoi").on("click" , function () {
                                    	   var mamonhoc =   $(this).attr("data-mamh")  ;
                                    	   var machuong = $(this).attr("data-machuong")  ;
                                    	  
                                    	   $.ajax({
                                    		   url : '/taocauhoi/them-theo-phan-cong/'+mamonhoc+'/'+machuong ,
                                    		   type: 'GET' ,
                                    		   success : function ( response) {
                                    			   $("#container").html(response);
                                    		   }                                    		   
                                    	   });
                                    	  
                                           } ) ;


                       

                                      $.ajax({
                                          url: '/taocauhoi/0',
                                          type: 'GET' ,
                                          success : function( response){
                                            $("#container").html(response);
                                          }
                                        })
                                        .done(function() {
                                          console.log("success");
                                        })
                                        .fail(function() {
                                          console.log("error");
                                        })
                                        .always(function() {
                                          console.log("complete");
                                        });
											
                                     
                                      $("#viewmonhoc").on('change' ,  function  () {
                                  
									        	  $.ajax({
			                                          url: '/taocauhoi/cauhoi/'+ $(this).val() ,
			                                          type: 'GET' ,
			                                          success : function( response){
			                                            $("#loading").html(response);
			                                          }
			                                        })
			                                        .done(function() {
			                                          console.log("success");
			                                        })
			                                        .fail(function() {
			                                          console.log("error");
			                                        })
			                                        .always(function() {
			                                          console.log("complete");
			                                        });

                      }) ;



                              $("#capnhatsoluong .ajax_mamh").each(function (){
                            	  
                            	   var mamh  = $(this).html();
                            	   var div =  $(this);
                            	  $.ajax({
                            		  url : '/cong-viec-proc/tenmon',
                            		  type : 'POST',
                            		  data:  {mamh: mamh } ,
                            		  success : function (response) {
                            			  div.html(response);
                            		  }
                            	  });
                            	  
                              }) ;


										/*]]>*/
									</script>









							</div>
							<!-- /.box-body -->
							<div class="box-footer" style="display: block;"></div>
							<!-- /.box-footer-->

						</div>

					</div>

				</div>


				<!-- /.row (main row) -->

			</section>
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->
		<footer  th:replace="footer"> </footer>


		<!-- Control Sidebar -->
		<!--  <aside class="control-sidebar control-sidebar-dark">
     Create the tabs 
 
  </aside>
    <script type="text/javascript">
     $(document).ready(function(){
    		$.get("includesPage/_aside.html" ,function( data ){
              $('.control-sidebar-dark').html(data);
    		});
    	});
    </script>-->
		<!-- /.control-sidebar -->
		<!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
		<div class="control-sidebar-bg"></div>
	</div>
	<!-- ./wrapper -->

	<!-- jQuery 2.2.3 -->
	<!---<script src="/Assets/admin2/plugins/jQuery/jquery-2.2.3.min.js"></script>-->
	<!-- jQuery UI 1.11.4 -->
	<script src="/Assets/admin2/plugins/jQueryUI/jquery-ui.js"></script>
	<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->

	<!-- Bootstrap 3.3.6 -->
	<script src="/Assets/admin2/bootstrap/js/bootstrap.min.js"></script>
	<!-- Morris.js charts -->

	<script src="/Assets/admin2/plugins/morris/morris.min.js"></script>
	<!-- Sparkline -->
	<script src="/Assets/admin2/plugins/sparkline/jquery.sparkline.min.js"></script>
	<!-- jQuery Knob Chart -->
	<script src="/Assets/admin2/plugins/knob/jquery.knob.js"></script>
	<!-- daterangepicker -->

<script src="/Assets/admin2/plugins/iCheck/icheck.min.js"></script>
	<!-- Bootstrap WYSIHTML5 -->
	<script
		src="/Assets/admin2/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
	<!-- Slimscroll -->
	<script
		src="/Assets/admin2/plugins/slimScroll/jquery.slimscroll.min.js"></script>
	<!-- FastClick -->
	<script src="/Assets/admin2/plugins/fastclick/fastclick.js"></script>
	<!-- AdminLTE App -->
	<script src="/Assets/admin2/dist/js/app.min.js"></script>
	<!-- AdminLTE for demo purposes -->
	<script src="/Assets/admin2/dist/js/demo.js"></script>
</body>
</html>
















