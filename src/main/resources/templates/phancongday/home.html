<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>Trang quản lý</title>
<!-- Tell the browser to be responsive to screen width -->
<meta
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
	name="viewport" />
<!-- Bootstrap 3.3.6 -->
<link rel="stylesheet"
	href="/Assets/admin2/bootstrap/css/bootstrap.min.css" />
<!-- Font Awesome -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css" />
<!-- Ionicons -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" />
<!-- Theme style -->
<link rel="stylesheet" href="/Assets/admin2/dist/css/AdminLTE.min.css" />
<!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
<link rel="stylesheet"
	href="/Assets/admin2/dist/css/skins/_all-skins.min.css" />
<!-- bootstrap wysihtml5 - text editor -->
<link rel="stylesheet"
	href="/Assets/admin2/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" />
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  
  <![endif]-->
<script src="/Assets/admin2/plugins/jQuery/jquery-2.2.3.min.js"></script>
<script src="/Assets/admin2/myproduct.js" type="text/javascript"></script>

<link rel="stylesheet" type="text/css"
	href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" />
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/buttons/1.3.1/css/buttons.bootstrap.min.css" />
<link rel="stylesheet" href="/Assets/admin/alert/sweetalert.css" />
<style type="text/css">
.custom {
	font-style: italic;
	font-size: 15px;
	color: #468847;
	background-color: #dff0d8;
	border: 1px solid #d6e9c6;
	border-radius: 8px;
}
</style>
<script type="text/javascript" src="/Assets/admin2/thanh.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		$('#myDatatable').tableSearch({
			searchText : '',
			searchPlaceHolder : 'Tìm kiếm...'
		});
	});
</script>
</head>
<body class="hold-transition skin-blue sidebar-mini">
	<div class="wrapper">


		<div th:replace="_header2::menu"></div>

		<!-- Left side column. contains the logo and sidebar -->
		<aside th:replace="_main-sidebar2::main_sidebar2">
			


		</aside>



		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->




<div class="row">
					<div class="col-md-12">
						<div class="box">
							<div class="box-header with-border">
								<i class="fa fa-inbox"></i> Quản trị


								<div class="box-tools pull-right">
									<button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="" data-original-title="Collapse">
										<i class="fa fa-minus"></i>
									</button>
									<button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="" data-original-title="Remove">
										<i class="fa fa-times"></i>
									</button>
								</div>
							</div>
							<div class="box-body" style="display: block;">
							
							
							



			<!-- Main content -->
		



			
				  		
					 <div class="col-md-12" >
					 
					 <h2 th:text="${khoa.tenkhoa}" style="text-align: right;"></h2>
					 <h3 style="color: red; text-align: left;">Danh Sách Bộ Môn</h3>
					 </div>	
					 <div class="col-md-12" >
					 <div class="panel-group" id="accordion">
					 
					   <th:block  th:each="bomon : ${khoa.boMonList}">
					   
					  
					   
					 
					 <div class="panel panel-default">
											<div class="panel-heading">
												<div class="pull-right">
													 <a class="badge bg-green" th:disabled="disabled" th:text="${#lists.size(bomon.monHocList)}+' Môn học'" >Khó</a>  <a class="badge bg-yellow" th:disabled="disabled" th:text="${#lists.size(bomon.giangVienList)}+' Giảng viên '" >Khó</a>  <a class="badge bg-blue collapsed" data-toggle="collapse" data-parent="#accordion"  th:href="'#collapse'+${bomon.mabomon}" aria-expanded="false"> <i class="fa fa-list-ol"></i>&nbsp;Chi tiết
													</a>
												</div>
												<h4 class="panel-title" style="margin-right: 150px;">
													<span class="counter"></span> <span th:text="${bomon.tenbomon}" > </span>
												</h4>
											</div>
											<div class="panel-collapse collapse" th:id="'collapse'+${bomon.mabomon}" aria-expanded="false" style="height: 0px;">
												<div class="panel-body">
													<!-- /dan-an -->
													<th:block th:each="monhoc:${bomon.monHocList}" > 
															
															 <div th:id="'dsgvbymm'+${bomon.mabomon}"  style="display: none;" >
					                            <ul  class="users-list clearfix">
					                       <th:block th:if="${#lists.size(bomon.giangVienList)== 0}"> 
					                        <h1> Bộ Môn này không có giảng viên tham gia dạy </h1>
					                       </th:block>
					                       <th:block  th:each="gv : ${bomon.giangVienList}">
						                  			<li>
						                  			  <img th:src="${ gv.anhgv == null }?'/UploadedFiles/no_img.jpg':'/upload/resize?url='+${gv.anhgv}+'&amp;w=150'"   src="/Assets/admin2/dist/img/user2-160x160.jpg"  class="user-image" alt="User Image"/>
						                  		
							           			<a class="users-list-name" th:text="${gv.tengv}" href="#">Trần Văn Thắng</a> <span class="users-list-date" th:text="${gv.email}">14130118</span>
							           			<span th:attr="data-magv=${gv.magv}" class="btn btn-info pull-right sendrequest" ><i class="fa fa-plus"></i></span>
							           			</li>
						                        
						                        </th:block>
						                         </ul>
					                        </div>
																	
																			
													<div class="form-group">
															<div class="radio">
																 <label> <span th:text="${monhoc.tenmon}" > </span>
																
																 <span   class="label bg-blue" th:if="${#lists.size(monhoc.giangVienList)!=0}" th:text="'Số giảng viên ' +${#lists.size(monhoc.giangVienList)}"></span>
																</label>
																
																 <th:block th:each="giangvien: ${monhoc.giangVienList}">
																  <div class="btn-group" role="group">
																
																 <div class="dropdown " th:classappend="'giangvien'+${giangvien.magv}+''+${monhoc.mamon}">
    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"   ><span th:text="${giangvien.tengv}"></span>
    <span class="caret"></span></button>
    <ul class="dropdown-menu">
      <li>
                    <img th:src="${ giangvien.anhgv == null }?'/UploadedFiles/no_img.jpg':'/upload/resize?url='+${giangvien.anhgv}+'&amp;w=150'"   src="/Assets/admin2/dist/img/user2-160x160.jpg"  class="user-image" alt="User Image"/>
     <a href="#" th:text="${giangvien.hogv} + ' '+${giangvien.tengv}"></a></li>
     
      <li><a href="#" th:text="${giangvien.email}"></a></li>
      <li><a href="#" th:text="${giangvien.ngaysinh}"></a></li>
       <li><a href="#" th:text="${giangvien.dienthoai}"></a></li>
       <li>
       
       <button type="submit"  th:attr="data-magv=${giangvien.magv}" th:attrappend="data-mamon=${monhoc.mamon}"  class="btn btn-danger pull-right xoaphancongday" ><i class="glyphicon glyphicon-remove"></i></button>
       
       </li>
    </ul>
  </div>										
  </div>
  
  
  				 </th:block>
								
    <div class="btn-group" role="group">
  <button type="submit" class="btn btn-info pull-right themgiangvien" th:attrappend="data-mamon=${monhoc.mamon}" th:attr="data-mabomon=${bomon.mabomon}"  data-toggle="modal" data-target=".bs-example-modal-lg"><i class="fa fa-plus"></i></button>
  </div>								
																
															</div>
														</div>
													
													  </th:block>
														

													
												

													
													

													
													<!-- ./dap-an -->


												</div>
											</div>
										</div>
					 
					 
					   </th:block>
					 </div>
					 
					 
					 
					 
					
					
					  
				
					  
				
					 </div>
					 
					 
					 
					 
					 
					 
					 
					 
					 
					 
					 
					 
					 
					  <div class="col-md-12" >
					  danh sach giang vien  
					  <select class="form-control">
					    <th:block th:each="bomon : ${khoa.boMonList}">
					    <option th:text="${bomon.tenbomon}" th:value="${bomon.mabomon}" ></option>
					    </th:block>
					  </select>
					 </div>
						
						
					</div>
				

				<!--      hết-->


		
			</div>
							</div>
							</div>
							</div>
							
							
							
							<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
              <form role="form">
     
       
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span></button>
            <h3 class="box-title">Chi tiết</h3>
          </div>
								<div id="container" class="col-md-12">

								</div>


<script th:inline="javascript">

      /*<![CDATA[*/
	  
    	  
    	   var magv = null ;
    	      var mamh = null;
    	    	  $(".themgiangvien").on("click", function (){
    	    		  
    	    		  $("#container").html($("#dsgvbymm"+$(this).attr("data-mabomon")).html());
    	    		  mamh = $(this).attr("data-mamon") ;
    	    		 
    	    	  });
    	    	  
    	    	  $("#container ").on('click','.sendrequest', function (){
    	    		  if(mamh == null ){
    	    			  alert("Chưa chon môn học ") ;
    	    		  }else{
    	    			  magv = $(this).attr("data-magv");
    	    		    }
    	    		  
    	    		  if(mamh != null && magv !=null) {
    	    			  $.ajax({
    	    				  url : '/phan-cong-day/phan-cong',
    	    				  type : 'POST' , 
    	    				  data : {  mamh: mamh , magv: magv  } ,
    	    				  success : function ( response ) {
    	    					 
    	    					  if(response ==  'true' ) {
    	    						  window.location ="";
    	    					  }else{
    	    						  alert(response) ;
    	    					  }
    	    				  }
    	    			  }) ;
    	    		  }
    	    		
    	    	  });
    	    	  
    	
      
        $(".xoaphancongday").on('click' , function () {
        	
        	  var mamh  = $(this).attr("data-mamon") ;
        	  var magv  = $(this).attr("data-magv") ;
        	  alert("ma mon  " + mamh  + " ma gv  " + magv);
                
        	  if( mamh  !=  null && magv  !=null) {
        		  
        		  $.ajax({
        			 url : '/phan-cong-day/delete' ,
        			 type : 'GET' ,
        			 data : {magv : magv ,  mamh : mamh } ,
        			 success : function (response ){
        				 if(response == 'true' ) {
        					 alert("xoa phan cong day thanh cong  ") ;
        					 $(".giangvien"+magv+""+mamh).remove();
        				 }else{
        					 alert("meo xoa duoc ");
        				 }
        			 }
        		  });
        	  }else{
        		  alert("null cmmr" );
        	  }
        });

       /*]]>*/
</script> 

  <div class="modal-footer">
            <button id="pop-close" type="submit" class="btn btn-primary" data-dismiss="modal">Đóng</button>
       
        </div>
   
    </form> 
    </div>
  </div>
        </div>
         
			<!-- /.content -->
		
		<!-- /.content-wrapper -->
		<footer  th:replace="footer"> </footer>


		<!-- Control Sidebar -->
		<!--  <aside class="control-sidebar control-sidebar-dark">
     Create the tabs 
 
  </aside>
    <script type="text/javascript">
     $(document).ready(function(){
    		$.get("includesPage/_aside.html" ,function( data ){
              $('.control-sidebar-dark').html(data);
    		});
    	});
    </script>-->
		<!-- /.control-sidebar -->
		<!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
		<div class="control-sidebar-bg"></div>
	</div>
	<!-- ./wrapper -->

	<!-- jQuery 2.2.3 -->
	<!---<script src="/Assets/admin2/plugins/jQuery/jquery-2.2.3.min.js"></script>-->
	<!-- jQuery UI 1.11.4 -->
	<script src="/Assets/admin2/plugins/jQueryUI/jquery-ui.js"></script>
	<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->

	<!-- Bootstrap 3.3.6 -->
	<script src="/Assets/admin2/bootstrap/js/bootstrap.min.js"></script>
	<!-- Morris.js charts -->

	<script src="/Assets/admin2/plugins/morris/morris.min.js"></script>
	<!-- Sparkline -->
	<script src="/Assets/admin2/plugins/sparkline/jquery.sparkline.min.js"></script>
	<!-- jQuery Knob Chart -->
	<script src="/Assets/admin2/plugins/knob/jquery.knob.js"></script>
	<!-- daterangepicker -->


	<!-- Bootstrap WYSIHTML5 -->
	<script
		src="/Assets/admin2/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
	<!-- Slimscroll -->
	<script
		src="/Assets/admin2/plugins/slimScroll/jquery.slimscroll.min.js"></script>
	<!-- FastClick -->
	<script src="/Assets/admin2/plugins/fastclick/fastclick.js"></script>
	<!-- AdminLTE App -->
	<script src="/Assets/admin2/dist/js/app.min.js"></script>
	<!-- AdminLTE for demo purposes -->
	<script src="/Assets/admin2/dist/js/demo.js"></script>
</body>
</html>
