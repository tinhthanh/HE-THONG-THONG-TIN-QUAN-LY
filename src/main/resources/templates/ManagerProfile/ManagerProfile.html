<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <title> Trang quản lý </title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="/Assets/admin2/bootstrap/css/bootstrap.min.css"/>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css"/>
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css"/>
  <!-- Theme style -->
  <link rel="stylesheet" href="/Assets/admin2/dist/css/AdminLTE.min.css"/>
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="/Assets/admin2/dist/css/skins/_all-skins.min.css"/>
  <!-- bootstrap wysihtml5 - text editor -->
  <link rel="stylesheet" href="/Assets/admin2/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css"/>
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  
  <![endif]-->
  <script src="/Assets/admin2/plugins/jQuery/jquery-2.2.3.min.js"></script>
  <script src="/Assets/admin2/myproduct.js" type="text/javascript"></script>
  
    <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css"/>
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.3.1/css/buttons.bootstrap.min.css"/>
 <link rel="stylesheet" href="/Assets/admin/alert/sweetalert.css"/>
 
 <script src="/Assets/admin2/plugins/ckeditor/ckeditor.js"></script>

<link href="/Assets/admin2/uploads/css/fileinput.css" rel="stylesheet" />
<script src="/Assets/admin2/uploads/js/fileinput.js"></script>
 
  <style type="text/css" >
     .custom {
             font-style: italic;
    font-size: 15px;
    color: #468847;
    background-color: #dff0d8;
    border: 1px solid #d6e9c6;
    border-radius: 8px;
     }

 </style>
 <style>
.kv-avatar .file-preview-frame,.kv-avatar .file-preview-frame:hover {
    margin: 0;
    padding: 0;
    border: none;
    box-shadow: none;
    text-align: center;
}
.kv-avatar .file-input {
    display: table-cell;
    max-width: 220px;
}
</style>
 <style type="text/css">
 .datatableCustomer {
    display: block; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
      background: rgba(244, 244, 244, 0.54);
      
}
 </style>
 <script type="text/javascript" src="/Assets/admin2/thanh.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $('#myDatatable').tableSearch({
                    searchText: '',
                    searchPlaceHolder: 'Tìm kiếm...'
                });
            });
        </script>
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">


		<div th:replace="_header2::menu"></div>

		<!-- Left side column. contains the logo and sidebar -->
		<aside th:replace="_main-sidebar2::main_sidebar2">
			


		</aside>



		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
    <!-- Main content -->
    <section class="content">
   
      <!-- Main row -->
      <div class="row">
      	<div class="col-md-12">
       		<div class="box">
        <div class="box-header with-border">
        <i class="fa fa-inbox"></i>  Quản trị 
            

          <div class="box-tools pull-right">
            <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="" data-original-title="Collapse">
              <i class="fa fa-minus"></i></button>
            <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="" data-original-title="Remove">
              <i class="fa fa-times"></i></button>
          </div>
        </div>
        <div class="box-body" style="display: block;">
         
        



 
   
<div class="col-md-12" >

<div class="col-md-4">
<div id="kv-avatar-errors-2" class="center-block" style="width:800px;display:none"></div>
<form class="text-center" id="avatar"  action="/upload/avatar" method="post" enctype="multipart/form-data">
    <div class="kv-avatar center-block" style="width:200px">
      
           <input id="file-fr" name="file[]" type="file" th:multiple="multiple"   class="file-loading" />
           
    </div>
    <!-- include other inputs if needed and include a form submit (save) button -->

</form >
<div class="col-md-12">
<div class="col-md-6">
   <button type="button" id="Mdoimatkhau" class="btn btn-success">Đổi mật khẩu</button>
</div>
<div class="col-md-6">
   <button type="button" id="MdoimatkhauSave" class="btn btn-success"> Save</button>
</div>
 
  <form  id="Vdoimatkhau" >
    
    <div class="form-group">
      <label>Mật khẩu củ </label>
     <input type="Password"  class="form-control" placeholder=" Mật khẩu củ " />
    </div>
        <div class="form-group">
      <label>Mật khẩu mới </label>
     <input type="Password"  class="form-control" placeholder=" Mật khẩu mới " />
    </div>
    
        <div class="form-group">
      <label>Nhập lại mật khẩu mới </label>
     <input type="Password"  class="form-control" placeholder=" Nhập lại mật khẩu mới  " />
    </div>
    

   
  </form>
</div> 

</div>

<div class="col-md-8">
  
  <form>
  <div class="form-group">
    <label for="exampleInputEmail1">Họ của bạn</label>
    <input type="text" class="form-control" id="hogv" th:value="${session.USER_SESSION.hogv}" placeholder="Tên của bạn" aria-describedby="emailHelp" />
   
  </div>

    <div class="form-group">
    <label for="exampleInputEmail1">Tên của bạn</label>
    <input type="text" th:value="${session.USER_SESSION.tengv}" class="form-control" id="tengv" placeholder="Tên của bạn" aria-describedby="emailHelp" />
   
  </div>

   <div class="form-group">
    <label for="exampleInputEmail1">Ngày Sinh</label>
    <input type="date" th:value="${session.USER_SESSION.ngaysinh}" class="form-control" id="ngaysinh" placeholder="dd-mm-yyyy" aria-describedby="emailHelp" />
  </div>


  <div class="form-group">
    <label for="exampleInputPassword1">Email </label>
    <input th:value="${session.USER_SESSION.email}" type="text" class="form-control" id="email" placeholder="Password"/>
  </div>

  <div class="form-group">
    <label for="exampleInputPassword1">Địa chỉ</label>
    <textarea cols="3" th:text="${session.USER_SESSION.diachi}" class="form-control" id="diachi" ></textarea>
  </div>

  <div class="form-group">
    <label for="exampleInputPassword1">Số điện thoại</label>
   <input  th:value="${session.USER_SESSION.dienthoai}" type="number" class="form-control" id="dienthoai" placeholder="Số điện thoại"/>
  </div>
  <div class="form-group">
    <label for="exampleSelect1">Giới tính</label>
    <select  id="gioitinh" class="form-control" >
      <option value="true">Nam</option>
      <option value="false" >Nữ</option>
    </select>
  </div>
  <div  class="form-group">
    <p class="text-right">
       <button type="button"  id="capnhat" class="btn btn-success">Cập nhật</button>
    </p>
  </div>
  </form>

</div>
<!-- your server code `avatar_upload.php` will receive `$_FILES['avatar']` on form submission -->
 
<!-- the fileinput plugin initialization -->

  
<script th:inline="javascript" >
// <![CDATA[
    

var btnCust = '<button type="button" id="thanhpro" class="btn btn-default" title="Add picture tags" ' + 
    'onclick="alert(\'Call your custom code here.\')">' +
    '<i class="glyphicon glyphicon-tag"></i>' +
    '</button>'; 

    var img = /*[[${session.USER_SESSION.anhgv}?${session.USER_SESSION.anhgv}:'/UploadedFiles/default_avatar.jpg']]*/ '/UploadedFiles/default_avatar.jpg';
   
$("#file-fr").fileinput({
	uploadUrl: "/upload/avatar",
	overwriteInitial: true,
    maxFileSize: 1500,
    showClose: false,
    showCaption: false,
    showBrowse: false,
    browseOnZoneClick: true,
    removeLabel: '',
    removeIcon: '<i class="glyphicon glyphicon-remove"></i>',
    removeTitle: 'Cancel or reset changes',
    elErrorContainer: '#kv-avatar-errors-2',
    msgErrorClass: 'alert alert-block alert-danger',
    defaultPreviewContent: '<img src="'+img+'" alt="Your Avatar" style="width:160px"/><h6 class="text-muted">Chọn hình ảnh</h6>',
    layoutTemplates: {main2: '{preview} ' +  btnCust + ' {remove} {browse}'},
    allowedFileExtensions: ["jpg", "png", "gif"]
});

  $("#thanhpro").click(function(event) {
    /* Act on the event */
     alert($("#avatar img").attr("src"));
  });


       // var Gmap;
       //  var directionPanel;
       //  var direction;

       //  function initialize() {
       //      Gmap = new GMap2(document.getElementById("map"));
       //      Gmap.setCenter(new GLatLng(22.573438, 88.36293), 15); // here I have set kolkata as Center and 15 zoom level
       //      directionPanel = document.getElementById("route");
       //      direction = new GDirections(Gmap, directionPanel);
       //  }
 //        $(document).ready(function () {
 //            initialize();
 //            $('#btnGetDirection').click(function () {
 //                //here populate data from database and get to GMap direction
 //                PopulateDirection();
 //            });
 //        });

 // function PopulateDirection() {
 //            var from = '10.8719808,106.790409';
 //                var to = '10.8825558,106.773176';
 //               var text =  'from: ' + from + ' to: '+ to ;
 //                        direction.load(text);
 //            }


 

// ]]>
</script>



          
        </div>
      
          
<div class="col-md-12" style="width: 100%; height: 300px;" id="map"></div>
    <script  th:inline="javascript">

   // <![CDATA[
  

   $(document).ready(function($) {
    $("#Vdoimatkhau").hide() ;
    $("#MdoimatkhauSave").hide();
       $("#Mdoimatkhau").click(function(event) {
         /* Act on the event */
                $("#Vdoimatkhau").show(); 
                 $("#MdoimatkhauSave").show();
            return false; 
       });
   });





     function initMap() {


        // var uluru = {lat: 10.8696676, lng: 106.787576};
        // var map = new google.maps.Map(document.getElementById('map'), {
        //   zoom: 10,
        //   scrollwheel: false,
        //   center: uluru
        // });
        // var marker = new google.maps.Marker({
        //   position: uluru,
        //   map: map
        // });
        // var infoWindow = new google.maps.InfoWindow({map: map});
        // console.log(infoWindow);


   var uluru = {lat: 10.8696676, lng: 106.787576};
        var map = new google.maps.Map(document.getElementById('map'), {
        scrollwheel: false,center: uluru ,
    zoom: 6 
});
          var marker = new google.maps.Marker({
          position: uluru,
          map: map
        });
var infoWindow = new google.maps.InfoWindow({map: map});

// Try HTML5 geolocation.
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
        var pos = {
            lat: position.coords.latitude,
            lng: position.coords.longitude
        };

        infoWindow.setPosition(pos);
        infoWindow.setContent('Location found.');
        map.setCenter(pos);
        $('#diachi').val(pos.lat + ","+pos.lng);
    }, function() {
        handleLocationError(true, infoWindow, map.getCenter());
    });
} else {
    // Browser doesn't support Geolocation
    handleLocationError(false, infoWindow, map.getCenter());
}

function handleLocationError(browserHasGeolocation, infoWindow, pos) {
    infoWindow.setPosition(pos);
    infoWindow.setContent(browserHasGeolocation ?
                          'Error: The Geolocation service failed.' :
                          'Error: Your browser doesn\'t support geolocation.');
}
      }
     

   
  function GiangVien(
   magv  ,
 hogv ,
tengv ,
ngaysinh ,
email , 
 matkhau  ,
  anhgv  ,
   diachi  ,
    dienthoai ,
     gioitinh ) {
     this.magv  =magv ; 
 this.hogv = hogv ;
 this.tengv  =tengv ;
this.ngaysinh = ngaysinh ;
 this.email = email ; 
 this.matkhau  = matkhau ;
  this.anhgv  =anhgv ;
  this.diachi  = diachi ;
    this.dienthoai = dienthoai ;
     this.gioitinh  = gioitinh ;
   
  }

                     $("#capnhat").click(function(event) {
                       /* Act on the event */
                          var gv = new GiangVien() ;
                           gv.magv = 0 ;
                           gv.hogv = $("#hogv").val();
                           gv.tengv = $("#tengv").val();
                           gv.ngaysinh = $("#ngaysinh").val();
                           gv.email = $("#email").val() ;
                           gv.dienthoai = $("#dienthoai").val();
                           gv.gioitinh = false ;
                           gv.diachi = $("#diachi").val();
                           if($("#gioitinh").val() == 'true'){
                                   gv.gioitinh = true  ;
                           }
                           gv.anhgv = $("#avatar img").attr("src") ;
                        
                           
                           if( gv.hogv  != '' 
                              && gv.tengv != '' 
                              && gv.ngaysinh != ''
                              && gv.email != ''
                              && gv.dienthoai != ''
                              // && gv.gioitinh != ''
                              && gv.anhgv != ''){

                        $.ajax({
                        type: "POST",
                        contentType : 'application/json; charset=utf-8',
                        dataType : 'json',
                        url: "/ManagerProfile/save",
                        data: JSON.stringify(gv), // Note it is important
                        success :function(response) {
                         // do what ever you want with data
                            console.log(response);
                           if(response.magv == null) {
                             
                             alert("meo them dc");
                           }else{
                           
                             alert("them thanh cong ");
                             
                           }   
                         
                        
                       }
                    }).done(function() {
                          console.log("success");
                         })
                         .fail(function() {
                          console.log("error");
                         })
                         .always(function() {
                          console.log("complete");
                         });


                           console.log(gv);
                             }else{
                              alert('Không được bỏ trong ');
                             }
                        return false ;
                     });  
   
                 




         // ]]> 
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBk5l9r5dXulRbLgvCqCqfL8gpeIJhw3ZM&amp;callback=initMap"
    ></script>
            
            
                    <!-- /.box-body -->
        <div class="box-footer" style="display: block;">
       
        </div>
        <!-- /.box-footer-->
        
      </div>
      </div>
      
       	</div>
       	
      </div>
     
      <!-- /.row (main row) -->

    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
 <footer  th:replace="footer"> </footer>

  <!-- Control Sidebar -->
<!--  <aside class="control-sidebar control-sidebar-dark">
     Create the tabs 
 
  </aside>
    <script type="text/javascript">
     $(document).ready(function(){
    		$.get("includesPage/_aside.html" ,function( data ){
              $('.control-sidebar-dark').html(data);
    		});
    	});
    </script>-->
  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

<!-- jQuery 2.2.3 -->
<!---<script src="/Assets/admin2/plugins/jQuery/jquery-2.2.3.min.js"></script>-->
<!-- jQuery UI 1.11.4 -->
 <script src="/Assets/admin2/plugins/jQueryUI/jquery-ui.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->

<!-- Bootstrap 3.3.6 -->
<script src="/Assets/admin2/bootstrap/js/bootstrap.min.js"></script>
<!-- Morris.js charts -->

<script src="/Assets/admin2/plugins/morris/morris.min.js"></script>
<!-- Sparkline -->
<script src="/Assets/admin2/plugins/sparkline/jquery.sparkline.min.js"></script>
<!-- jQuery Knob Chart -->
<script src="/Assets/admin2/plugins/knob/jquery.knob.js"></script>
<!-- daterangepicker -->


<!-- Bootstrap WYSIHTML5 -->
<script src="/Assets/admin2/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
<!-- Slimscroll -->
<script src="/Assets/admin2/plugins/slimScroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="/Assets/admin2/plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="/Assets/admin2/dist/js/app.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="/Assets/admin2/dist/js/demo.js"></script>
</body>
</html>
